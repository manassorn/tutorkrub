<html lang="en">
 <head> 
  <!-- Required meta tags --> 
  <meta charset="utf-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> 
  <title>Synadmin - Bootstrap4 Admin Template</title> 
  <!--favicon--> 
  <link rel="icon" href="assets/images/favicon-32x32.png" type="image/png"> 
  <!--plugins--> 
  <link href="assets/plugins/simplebar/css/simplebar.css" rel="stylesheet"> 
  <link href="assets/plugins/perfect-scrollbar/css/perfect-scrollbar.css" rel="stylesheet"> 
  <link href="assets/plugins/metismenu/css/metisMenu.min.css" rel="stylesheet"> 
  <!-- loader--> 
  <link href="assets/css/pace.min.css" rel="stylesheet"> 
  <!-- Bootstrap CSS --> 
  <link rel="stylesheet" href="assets/css/bootstrap.min.css"> 
  <!-- Icons CSS --> 
  <link rel="stylesheet" href="assets/css/icons.css"> 
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.css" integrity="sha512-2eMmukTZtvwlfQoG8ztapwAH5fXaQBzaMqdljLopRSA0i6YKM8kBAOrSSykxu9NN9HrtD45lIqfONLII2AFL/Q==" crossorigin="anonymous" />
  
  <!-- App CSS --> 
  <link rel="stylesheet" href="assets/css/app.css"> 
  <link rel="stylesheet" href="assets/css/dark-style.css"> 
 </head> 
 <body class=""> 
  <!-- wrapper --> 
  <div class="wrapper"> 
   <!--header--> 
   <div id="navbar"></div>
   <!--end header--> 
   <!--page-wrapper--> 
   <div class="page-wrapper">
    <!--page-content-wrapper--> 
    <div class="page-content-wrapper">
      
      
     
    <div id="edit-email-section" class="">
      <div class="p-3 d-flexx align-items-center justify-content-between text-center" style="position:relative"> 
      <a href="javascript:history.back()" style="position:absolute;left:15px;top:8px">
       <i class="bx bx-chevron-left text-dark" style="font-size: 36px"></i>
      </a>
      <h3 class="mb-0">อัพโหลดรูป</h3>

     </div> 
     <div class="container" style="max-width:720px">
      <div class="border-top pt-3"> 
      
      <div id="upload-boundary" style="height:90px;border:solid 1px grey;" class="text-center mb-3">
        คลิกเพื่ออัพโหลดรูป
        <input type="file" id="upload-input" accept="image/*" required/>

      </div>
      

       <div id="upload-edit" class="d-nonex">
        <div id="upload-preview" style="height:350px"></div>

        <div class="p-3 text-center" style="line-height:30px">
         <a href="#" onclick="$('#upload-input').click()">หมุนรูป</a><br>
         <a href="#" onclick="$('#upload-input').click()">เลือกรูปใหม่</a>
        </div>
        <button id="submit-btn" class="btn btn-primary btn-block">บันทึก</button>
       </div>

       
      </div>
     </div> 

    </div>


     
     
    </div> 
    
    
    
    
    <!--end page-content-wrapper--> 
   </div> 
   <!--end page-wrapper--> 
   <!--start overlay--> 
   <div class="overlay toggle-btn-mobile"></div> 
   <!--end overlay--> 
   <!--Start Back To Top Button--> 
   <a href="javaScript:;" class="back-to-top"><i class="bx bxs-up-arrow-alt"></i></a> 
   <!--End Back To Top Button-->
  </div> 
  <!-- end wrapper --> 
  <!-- JavaScript --> 
  <!-- jQuery first, then Popper.js, then Bootstrap JS --> 
  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/js/popper.min.js"></script>
  <script src="assets/js/bootstrap.min.js"></script>
  <!--plugins-->
  <script src="assets/plugins/simplebar/js/simplebar.min.js"></script>
  <script src="assets/plugins/metismenu/js/metisMenu.min.js"></script>
  <script src="assets/plugins/perfect-scrollbar/js/perfect-scrollbar.js"></script>
  <!-- App JS -->
  <script src="assets/js/app.js"></script>
  
  <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.min.js" integrity="sha512-Gs+PsXsGkmr+15rqObPJbenQ2wB3qYvTHuJO6YJzPe/dTLvhy0fmae2BcnaozxDo5iaF8emzmCZWbQ1XXiX2Ig==" crossorigin="anonymous"></script>
  
      

  
<!--  <script type="text/babel" src="navbarxxx.js"></script>-->
  <script type="text/javascript" src="navbar3.js"></script>
  <!--plugins--> 
  <!-- App JS --> 
  <script>
  var id = 'hNqOKzYwhJjZTIDLUkf5'
  var $profilePicPreview = $('#upload-preview').croppie({
    viewport: {
      width: 200,
      height: 200,
      type: 'circle'
    },
    boundary: {
      width: 300,
      height: 300
    },
    enableExif: true
  });
$profilePicPreview.croppie('bind', {
url: '/assets/images/avatars/avatar-1.png'
});
function readFile(input) {
  $('#upload-edit').removeClass('d-none')
 $('#upload-boundary').addClass('d-none')

  if (input.files && input.files[0]) {
    var reader = new FileReader();

    reader.onload = function (event) {
      $profilePicPreview.croppie('bind', {
        url: event.target.result
      });
    };

    reader.readAsDataURL(input.files[0]);
  } else {
    alert('Sorry - you\'re browser doesn\'t support the FileReader API');
  }
}

$('#upload-input').on('change', function() { readFile(this); });
  
  $('#submit-btn').on('click', function() {
    alert(22)
    $profilePicPreview.croppie('result', 'blob').then(function(blob) {
     var formData = new FormData()
     formData.append('file', blob)
     $.ajax({
     type: 'POST',
     url: API_HOST + "/api/upload/to/user/" + id + '/avatar',
     data: formData,
     processData: false,
     contentType: false
     }).done(function(data) {
     console.log(data);
     });
   })
  })
  
    
  </script>
 </body>
</html>
